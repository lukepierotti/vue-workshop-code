<script src="https://unpkg.com/vue@2.5.17-beta.0"></script>

<div id="app">
  <error-boundary>
    <foo></foo>
  </error-boundary>
</div>

<script>
Vue.component('error-boundary', {
  data () {
    return {
      error: null
    }
  },
  errorCaptured (err, vm, info) {
    this.error = err.message
    return false
  },
  render (h) {
    if (this.error) {
      return h(
        'pre',
        { style: { color: 'red' }},
        `error from children: ${this.error}`
      )
    }
    return this.$slots.default[0]
  }
})

// Foo throws error
Vue.component('foo', {
  render (h) {
    throw new Error('oops')
    return h('div', 'hello from foo')
  }
})

new Vue({
  el: '#app',
  data: {
    throws: true
  }
})
</script>
